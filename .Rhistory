filter(indicator_label == "Public Administration", value_percentage == safe_max(value_percentage)) %>%
pull(country_name) %>%
first() %>%
coalesce("N/A")
lowest_admin <- filtered_data %>%
filter(indicator_label == "Public Administration", value_percentage == safe_min(value_percentage)) %>%
pull(country_name) %>%
first() %>%
coalesce("N/A")
highest_education <- filtered_data %>%
filter(indicator_label == "Education", value_percentage == safe_max(value_percentage)) %>%
pull(country_name) %>%
first() %>%
coalesce("N/A")
lowest_education <- filtered_data %>%
filter(indicator_label == "Education", value_percentage == safe_min(value_percentage)) %>%
pull(country_name) %>%
first() %>%
coalesce("N/A")
highest_health <- filtered_data %>%
filter(indicator_label == "Health", value_percentage == safe_max(value_percentage)) %>%
pull(country_name) %>%
first() %>%
coalesce("N/A")
lowest_health <- filtered_data %>%
filter(indicator_label == "Health", value_percentage == safe_min(value_percentage)) %>%
pull(country_name) %>%
first() %>%
coalesce("N/A")
avg_admin <- safe_mean(filtered_data$value_percentage[filtered_data$indicator_label == "Public Administration"])
avg_education <- safe_mean(filtered_data$value_percentage[filtered_data$indicator_label == "Education"])
avg_health <- safe_mean(filtered_data$value_percentage[filtered_data$indicator_label == "Health"])
first_country_admin <- filtered_data %>%
filter(country_name == first_country, indicator_label == "Public Administration") %>%
pull(value_percentage) %>%
first() %>%
coalesce(0) %>%
round(0)
first_country_education <- filtered_data %>%
filter(country_name == first_country, indicator_label == "Education") %>%
pull(value_percentage) %>%
first() %>%
coalesce(0) %>%
round(0)
# ✅ Compare first country with others using rounded numbers
comparison_admin <- if (first_country_admin > avg_admin) {
paste0("This is higher than the average of ", avg_admin, "% across the other selected countries.")
} else {
paste0("This is lower than the average of ", avg_admin, "% across the other selected countries.")
}
comparison_education <- if (first_country_education > avg_education) {
paste0("This is higher than the average of ", avg_education, "% across the other selected countries.")
} else {
paste0("This is lower than the average of ", avg_education, "% across the other selected countries.")
}
# ✅ Ensure all numbers in interpretation_text are rounded integers
interpretation_text <- paste0(
"This graph compares the gender wage premium in the public sector across different industries. ",
"On average, the wage premium in Public Administration is ", avg_admin, "%, in Education it is ", avg_education, "%, ",
"and in Health it is ", avg_health, "%.\n\n",
"The highest wage premium in Public Administration is in ", highest_admin, ", while the lowest is in ", lowest_admin, ". ",
"In Education, the highest wage premium is observed in ", highest_education, ", whereas the lowest is in ", lowest_education, ". ",
"For Health, the highest gender wage premium is in ", highest_health, ", while the lowest is in ", lowest_health, ".\n\n",
"In ", first_country, ", the wage premium in Public Administration is ", first_country_admin, "%. ",
comparison_admin, "\n",
"In Education, the wage premium in ", first_country, " is ", first_country_education, "%. ",
comparison_education
)
# ✅ Add Image and Interpretation to the Document
doc <- doc %>%
body_add_img(src = img_path, width = 6, height = 4) %>%
body_add_par("This graph shows the gender wage premium in the public sector across different industries.", style = "Normal") %>%
body_add_par(interpretation_text, style = "Normal")
return(doc)
}
generate_intro_section <- function(doc) {
# Initialize Word document
doc <- read_docx()
# Get the first selected country
first_country <- if (!is.null(input$countries) && length(input$countries) > 0) {
input$countries[1]
} else {
"Unknown Country"
}
# Ensure first_region is defined properly
first_region <- if (!is.null(input$region) && input$region != "") {
input$region
} else {
"the selected region"
}
# Add Title to Document
title_text <- paste0(first_country, "\nWage Bill and Public Employment Analysis")
# Format title
title_style <- fp_text(color = "#722F37", font.size = 20, bold = TRUE)
subtitle_style <- fp_text(color = "black", font.size = 16, bold = TRUE)
doc <- doc %>%
body_add_fpar(fpar(ftext(first_country, prop = title_style))) %>%
body_add_fpar(fpar(ftext("Wage Bill and Public Employment Analysis", prop = subtitle_style)))
# Extract the World Bank Region for the Selected Country
first_region <- countrycode(first_country, origin = "country.name", destination = "region")
# Handle missing values in case countrycode() fails
if (is.na(first_region)) {
first_region <- "its respective region"  # Default fallback if region is not found
}
# Construct Introduction Text Dynamically
intro_text <- paste0(
"This note presents evidence on public sector employment and compensation practices in ", first_country,
" using the Worldwide Bureaucracy Indicators (WWBI). The primary data source is the Labor Force Survey , conducted by the National Statistics Office. ",
"For international comparisons, peer countries from ", first_region, " are included.",
"\n\n",  # Add line break for a new paragraph
"The public sector is typically a major source of employment in most countries. ",
"The provision of basic services such as education, health, citizen security, and justice, among others, ",
"makes it a central actor in labor markets, with significant impacts on the aggregate results of employment, ",
"wages, informality, and other economic variables. Moreover, public employment is an indicator of the state’s ",
"participation in the entire economy, which has implications for macroeconomic balances, allocation efficiency, ",
"and income distribution. Thus, this analysis comprehensively documents the size of public employment, ",
"its changes over time, and the characteristics of its workforce.",
"\n\n",
"This work documents and analyzes the size, composition, and changes in the levels of employment and wages of ",
first_country, "’s public employees compared to the private sector and how these metrics compare to regional peers."
)
# ✅ Add introduction text
doc <- doc %>% body_add_par(intro_text, style = "Normal")
# Define a bold, blue style for section headings
section_style <- fp_text(color = "#003366", font.size = 14, bold = TRUE)
# ✅ Add section title using styled text
doc <- doc %>% body_add_fpar(fpar(ftext("The Macro Fundamentals of the Public Sector", prop = section_style)))
return(doc)
}
generate_conclusion_section <- function(doc) {
# Add Section Title
doc <- doc %>% body_add_par("Conclusion", style = "heading 1")
# Add Conclusion Text
doc <- doc %>% body_add_par(
"This report provides a comprehensive analysis of wage bill trends, gender employment representation, and workforce participation in the public sector.
The findings highlight key trends and disparities across different sectors and countries.",
style = "Normal"
)
return(doc)
}
#Download selected graphs
output$downloadSelectedGraphsDoc <- downloadHandler(
filename = function() {
paste0("Wage_bill_and_public_employment_analysis_Selected_Report_", Sys.Date(), ".docx")
},
content = function(file) {
# Get the selected countries dynamically
selected_countries <- input$countries_first
# Initialize Word document
doc <- read_docx()
# Add Report Title
title_style <- fp_text(color = "#722F37", font.size = 20, bold = TRUE)
doc <- doc %>% body_add_fpar(fpar(ftext("Wage_bill_and_public_employment_analysis_Selected_Report_", prop = title_style)))
doc <- generate_intro_section(doc)  # Add the Intro First
# Define Section Style
section_style <- fp_text(color = "#003366", font.size = 14, bold = TRUE)
# ✅ Dynamically include only selected sections
selected_sections <- input$selected_graphs
# ✅ Ensure selected_sections is not NULL before checking length
if (is.null(selected_sections) || length(selected_sections) == 0) {
doc <- doc %>% body_add_par("No sections selected for download.", style = "Normal")
} else {
if ("wagebill" %in% selected_sections) {
doc <- generate_wage_bill_analysis_section(doc)
}
if ("wagebill_gdp" %in% selected_sections) {
doc <- generate_gdp_analysis_section(doc, selected_countries)
}
if ("tertiaryeducation" %in% selected_sections) {
doc <- generate_tertiary_education_section(doc)
}
if ("genderwagepremium" %in% selected_sections) {
doc <- generate_wage_premium_gender_section(doc)
}
if ("wagepremiumeducation" %in% selected_sections) {
doc <- generate_wage_premium_education_section(doc)
}
if ("public_employment" %in% selected_sections) {
doc <- generate_public_sector_employment_section(doc)
}
if ("wagepremiumgender" %in% selected_sections) {
doc <- generate_wage_premium_gender_report_section(doc)
}
if ("public_workforce" %in% selected_sections) {
doc <- generate_public_sector_workforce_section(doc)
}
if ("gender_workforce" %in% selected_sections) {
doc <- generate_gender_workforce_section(doc)
}
if ("femaleoccupation" %in% selected_sections) {  # Fixed typo from "femaleocuupation"
doc <- generate_females_occupation_groups_section(doc)
}
if ("wagepremium" %in% selected_sections) {
doc <- generate_wage_premium_report_section(doc)
}
if ("gender_wage_premium" %in% selected_sections) {
doc <- generate_gender_wage_premium_section(doc)
}
}
# ✅ Save the customized report
print(doc, target = file)
}
)
#Download one single report
output$downloadAllGraphsDoc <- downloadHandler(
filename = function() {
paste0("Wage_bill_and_public_employment_analysis_", Sys.Date(), ".docx")
},
content = function(file) {
# Get the selected countries dynamically
selected_countries <- input$countries_first
# Initialize Word document
doc <- read_docx()
# Add Report Title
title_style <- fp_text(color = "#722F37", font.size = 20, bold = TRUE)
doc <- doc %>% body_add_fpar(fpar(ftext("Wage bill and public employment analysis", prop = title_style)))
doc <- generate_intro_section(doc)  # Add the Intro First
#Define Section Style
section_style <- fp_text(color = "#003366", font.size = 14, bold = TRUE)
# Add Sections from Each Tab
doc <- generate_wage_bill_analysis_section(doc) #  Wage Bill Analysis
doc <- generate_gdp_analysis_section(doc, selected_countries)
doc <- generate_tertiary_education_section(doc) # Tertiary Education Analysis
doc <- generate_wage_premium_gender_section(doc) #Wage Premium Gender Analysis
doc <- generate_wage_premium_education_section(doc) #Wage Premium by Education
doc <- doc %>% body_add_fpar(fpar(ftext("The size of the public sector", prop = section_style)))
doc <- generate_public_sector_employment_section(doc)  #Public Sector Employment
doc <- generate_wage_premium_gender_report_section(doc) #Wage Premium Gender Report
doc <- doc %>% body_add_fpar(fpar(ftext("Characteristics of the public sector workforce", prop = section_style)))
doc <- generate_gender_workforce_section(doc) #Gender Workforce Analysis
doc <- generate_females_occupation_groups_section(doc) #Females by Occupational Groups
doc <- doc %>%
body_add_fpar(fpar(ftext("Competitiveness of Public Sector Wages", prop = section_style))) %>%
body_add_par(
"Public sector compensation should theoretically be designed with an awareness of its influence on the broader labor market. According to the theory of “compensating wage differentials,” a job should pay more (or less) depending on its non-wage characteristics that are undesirable (or desirable). Therefore, the optimal design of public sector wages should account for the greater presence of both financial and non-financial benefits in public service. Ideally, public sector wages should include a slight penalty in base wages due to the higher non-monetary benefits such as job security, pension plans, and the opportunity to serve the public. This structure means that, despite lower monetary compensation, the total de facto compensation (including these non-monetary benefits) that individuals receive would be roughly equivalent to that in the private sector. Public sector wages should also track private sector wages, maintaining a small penalty while ensuring that wage rigidities in the public sector do not create a significant gap between the two sectors. This alignment would ensure that public sector compensation remains competitive without being distortionary, preventing shortages of skills or qualified applicants in either sector.",
style = "Normal"
)
doc <- generate_wage_premium_report_section(doc) #Public Sector Wage Premium Report
doc <- generate_gender_wage_premium_section(doc)    # Wage Premium by industry Analysis
# ✅ Add Conclusion Section at the End
doc <- generate_conclusion_section(doc)
# Save the Final Report
print(doc, target = file)
}
)
output$worldMap <- renderLeaflet({
data_values <- filtered_data_for_map()
color_pal <- colorNumeric("Greens", domain = c(min(data_values$value_percentage, na.rm = TRUE),
max(data_values$value_percentage, na.rm = TRUE)))
leaflet(world_spdf) %>% addTiles() %>% setView(lng = 0, lat = 20, zoom = 2) %>%
addLegend(position = "bottomright", pal = color_pal,
values = c(min(data_values$value_percentage, na.rm = TRUE),
max(data_values$value_percentage, na.rm = TRUE)),
title = "Indicator Value", opacity = 1)
})
filtered_data_for_map <- reactive({
req(input$indicatorSelect, input$yearSelect)
data_wwbi %>% filter(indicator_name == input$indicatorSelect,
!is.na(.data[[paste0("year_", input$yearSelect)]])) %>%
transmute(country_name, indicator_name, value_percentage = .data[[paste0("year_", input$yearSelect)]])
})
observe({
req(input$indicatorSelect, input$yearSelect)
reported_countries <- filtered_data_for_map()
if(is.null(reported_countries) || nrow(reported_countries) == 0) return()
world_data_merged <- world_spdf %>% left_join(reported_countries, by = "country_name")
color_pal <- colorNumeric("Greens", domain = c(min(reported_countries$value_percentage, na.rm = TRUE),
max(reported_countries$value_percentage, na.rm = TRUE)))
leafletProxy("worldMap") %>% clearShapes() %>%
addPolygons(data = world_data_merged,
fillColor = ~ifelse(is.na(value_percentage), "#808080", color_pal(value_percentage)),
fillOpacity = 0.7,
color = "white",
weight = 1,
highlightOptions = highlightOptions(color = "#FFD700", weight = 2, fillOpacity = 0.9),
label = ~paste0("<strong>Country:</strong> ", country_name, "<br>",
ifelse(!is.na(value_percentage), paste0("<strong>Value:</strong> ", round(value_percentage, 2)), "<strong>No Data</strong>")),
popup = ~paste("Country:", country_name, "<br>Indicator:", indicator_name,
ifelse(!is.na(value_percentage), paste("<br>Value:", round(value_percentage, 2)), "<br>No Data Available"))
)
output$countryCount <- renderText({
paste("Total Countries with Data:", nrow(reported_countries))
})
})
# Change infoBox colors to "purple" to match the quartz theme
output$numberIndicatorsBox <- renderInfoBox({
infoBox("Indicators", 302, icon = icon("list"), color = "purple")
})
output$numberCountriesBox <- renderInfoBox({
infoBox("Economies", length(unique(data_wwbi$country_name)), icon = icon("globe"), color = "purple")
})
output$temporalCoverageAnnualBox <- renderInfoBox({
infoBox("Temporal Coverage (Annual)", "2000-2022", icon = icon("calendar"), color = "purple")
})
output$temporalCoverageYearsBox <- renderInfoBox({
infoBox("Temporal Coverage (Years)", "22", icon = icon("calendar"), color = "purple")
})
output$lastUpdatedBox <- renderInfoBox({
infoBox("Last Updated", "2022", icon = icon("clock"), color = "purple")
})
}
shinyApp(ui = ui, server = server)
setwd("C:/WBG/GitHub/WWBI/ShinyApp")
list.files()
rsconnect::deployApp(appDir = "C:/WBG/GitHub/WWBI/ShinyApp")
remove.packages("quarto")
rsconnect::deployApp(appDir = "C:/WBG/GitHub/WWBI/ShinyApp")
rsconnect::deployApp(appDir = "C:/WBG/GitHub/WWBI/ShinyApp",
appPrimaryDoc = "02-shiny-dashboard.R")
rsconnect::showLogs()
data_path1 <- file.path(getwd(), "data_wwbi.dta")
data_path2 <- file.path(getwd(), "data_gdp.dta")
gdp_pc <- read_dta(data_path)
gdp_pc <- read_dta(data_path2)
View(gdp_pc)
rsconnect::deployApp(appDir = "C:/WBG/GitHub/WWBI/ShinyApp",
appPrimaryDoc = "02-shiny-dashboard.R"
rsconnect::deployApp(appDir = "C:/WBG/GitHub/WWBI/ShinyApp",
rsconnect::deployApp(appDir = "C:/WBG/GitHub/WWBI/ShinyApp",
appPrimaryDoc = "02-shiny-dashboard.R")
data_wwbi[, wb_region := countrycode(country_name, origin = "country.name", destination = "region")]
setDT(data_wwbi)
data_wwbi[, wb_region := countrycode(country_name, origin = "country.name", destination = "region")]
unique(data_wwbi[, .(country_name, wb_region)])
data_wwbi[is.na(wb_region) & country_name == "Micronesia", wb_region := "East Asia & Pacific"]
wb_metadata <- wb_cachelist$countries[, c("iso3c", "income_level")]
data_wwbi[, iso3c := countrycode(country_name, origin = "country.name", destination = "iso3c")]
data_wwbi[country_name == "Kosovo", iso3c := "XKX"]
data_wwbi[country_name == "Micronesia", iso3c := "FSM"]
wb_metadata <- wb_metadata %>% rename(income_group = income_level)
data_wwbi <- merge(data_wwbi, wb_metadata, by = "iso3c", all.x = TRUE)
setnames(data_wwbi, "income_group", "income_level")
write_dta(data_wwbi, file.path(data_path, "C:/WBG/GitHub/WWBI/ShinyApp/data_wwbi.dta"))
datapathshiny <- "C:/WBG/GitHub/WWBI/ShinyApp"
write_dta(data_wwbi, file.path(datapathshiny, "C:/WBG/GitHub/WWBI/ShinyApp/data_wwbi.dta"))
write_dta(data_wwbi, file.path(datapathshiny, "/data_wwbi.dta"))
View(world_spdf)
write_dta(world_spdf, file.path(datapathshiny, "/world_spdf.dta"))
st_write(world_spdf, datapathshiny(/"world_spatial.gpkg"), delete_layer = TRUE)
st_write(world_spdf, datapathshiny(shiny_folder, "world_spatial.gpkg"), delete_layer = TRUE)
st_write(world_spdf, file.path(datapathshiny, "world_spatial.gpkg"))
data_wwbi <- data_wwbi[!grepl("^P-Value:", data_wwbi$indicator_name), ]
write_dta(data_wwbi, file.path(datapathshiny, "/data_wwbi.dta"))
write_dta(selected_data_long, file.path(datapathshiny, "/selected_data_long.dta"))
data_gdp <- data_gdp %>%
pivot_longer(cols = starts_with("year_"),
names_to = "year",
values_to = "value") %>%
mutate(year = as.numeric(gsub("year_", "", year))) %>%  # Clean the 'year' column
filter(!is.na(value))  # Remove rows with NA values
data_gdp <- read_dta(file.path(data_path, "data_gdp.dta"))
data_path <- "C:/WBG/GitHub/WWBI"
data_gdp <- read_dta(file.path(data_path, "data_gdp.dta"))
data_path <- "C:/Users/wb631166/OneDrive - WBG/Desktop/Bureaucracy Lab/WWBI/Data/Intermediate"
data_gdp <- read_dta(file.path(data_path, "data_gdp.dta"))
data_gdp <- data_gdp %>%
pivot_longer(cols = starts_with("year_"),
names_to = "year",
values_to = "value") %>%
mutate(year = as.numeric(gsub("year_", "", year))) %>%  # Clean the 'year' column
filter(!is.na(value))  # Remove rows with NA values
write_dta(data_gdp, file.path(datapathshiny, "/data_gdp.dta"))
write_dta(data_wwbi_long, file.path(datapathshiny, "/data_wwbi_long.dta"))
write_dta(wage_bill_publicexp, file.path(datapathshiny, "/wage_bill_publicexp.dta"))
write_dta(wage_bill_gdp, file.path(datapathshiny, "/wwage_bill_gdp.dta"))
write_dta(public_sector_emp_temp, file.path(datapathshiny, "/public_sector_emp_temp.dta"))
write_dta(public_sector_emp, file.path(datapathshiny, "/public_sector_emp.dta"))
write_dta(public_sector_emp_temp_last, file.path(datapathshiny, "/public_sector_emp_temp_last.dta"))
write_dta(public_sector_workforce, file.path(datapathshiny, "/public_sector_workforce.dta"))
write_dta(public_sector_workforce_first_last, file.path(datapathshiny, "/public_sector_workforce_first_last.dta"))
write_dta(gender_workforce, file.path(datapathshiny, "/gender_workforce.dta"))
write_dta(gdp_2015, file.path(datapathshiny, "/gdp_2015.dta"))
write_dta(data_indicator_wb, file.path(datapathshiny, "/data_indicator_wb.dta"))
write_dta(gdp_2015, file.path(datapathshiny, "/gdp_2015.dta"))
write_dta(merged_data, file.path(datapathshiny, "/merged_data.dta"))
write_dta(public_wage_premium, file.path(datapathshiny, "/public_wage_premium.dta"))
write_dta(public_wage_premium_educ, file.path(datapathshiny, "/public_wage_premium_educ.dta"))
write_dta(gender_wage_premium, file.path(datapathshiny, "/gender_wage_premium.dta"))
write_dta(gender_wage_premium_last, file.path(datapathshiny, "/ggender_wage_premium_last.dta"))
write_dta(gender_wage_premium_last, file.path(datapathshiny, "/gender_wage_premium_last.dta"))
write_dta(public_sector_emp_temp, file.path(datapathshiny, "/public_sector_emp_temp.dta"))
write_dta(gender_leadership, file.path(datapathshiny, "/gender_leadership.dta"))
write_dta(gender_wage_premiumpublic, file.path(datapathshiny, "/gender_wage_premiumpublic.dta"))
data_wwbi     <- read_dta(file.path(datapathshiny, "/data_wwbi.dta"))
world_spdf <- st_read(file.path(datapathshiny, "/world_spatial.gpkg"))
write_dta(wage_bill_gdp, file.path(datapathshiny, "/wage_bill_gdp.dta"))
write_dta(tertiary_education, file.path(datapathshiny, "/tertiary_education.dta"))
public_wage_premium_educ     <- read_dta(file.path(datapathshiny, "/public_wage_premium_educ.dta"))
rsconnect::deployApp("C:/WBG/GitHub/WWBI/ShinyApp")
rsconnect::deployApp(appDir = "C:/WBG/GitHub/WWBI/ShinyApp",
appPrimaryDoc = "02-shiny-dashboard.R")
rsconnect::showLogs()
list.files("C:/WBG/GitHub/WWBI/ShinyApp")
rsconnect::deployApp(appDir = "C:/WBG/GitHub/WWBI/ShinyApp",
appPrimaryDoc = "02-shiny-dashboard.R")
rsconnect::showLogs()
rsconnect::deployApp(appDir = "C:/WBG/GitHub/WWBI/ShinyApp",
appPrimaryDoc = "02-shiny-dashboard.R")
rsconnect::showLogs()
grep("C:/WBG/GitHub/WWBI/Data/data_wwbi.dta", readLines("app.R"), value = TRUE)
datapathshiny <- "C:/WBG/GitHub/WWBI/ShinyApp"
data_wwbi     <- read_dta(file.path(datapathshiny, "/data_wwbi.dta"))
data_gdp     <- read_dta(file.path(datapathshiny, "/data_gdp.dta"))
gdp_2015     <- read_dta(file.path(datapathshiny, "/gdp_2015.dta"))
world_spdf <- st_read(file.path(datapathshiny, "/world_spatial.gpkg"))
selected_data_long     <- read_dta(file.path(datapathshiny, "/selected_data_long.dta"))
data_wwbi_long     <- read_dta(file.path(datapathshiny, "/data_wwbi_long.dta"))
wage_bill_publicexp     <- read_dta(file.path(datapathshiny, "/wage_bill_publicexp.dta"))
wage_bill_gdp     <- read_dta(file.path(datapathshiny, "/wage_bill_gdp.dta"))
public_sector_emp_temp     <- read_dta(file.path(datapathshiny, "/public_sector_emp_temp.dta"))
public_sector_emp     <- read_dta(file.path(datapathshiny, "/public_sector_emp.dta"))
public_sector_emp_temp_last     <- read_dta(file.path(datapathshiny, "/public_sector_emp_temp_last.dta"))
public_sector_workforce.dta     <- read_dta(file.path(datapathshiny, "/public_sector_workforce.dta"))
public_sector_workforce_first_last     <- read_dta(file.path(datapathshiny, "/public_sector_workforce_first_last.dta"))
gender_workforce     <- read_dta(file.path(datapathshiny, "/gender_workforce.dta"))
data_indicator_wb     <- read_dta(file.path(datapathshiny, "/data_indicator_wb.dta"))
merged_data     <- read_dta(file.path(datapathshiny, "/merged_data.dta"))
tertiary_education     <- read_dta(file.path(datapathshiny, "/tertiary_education.dta"))
public_wage_premium     <- read_dta(file.path(datapathshiny, "/public_wage_premium.dta"))
public_wage_premium_educ     <- read_dta(file.path(datapathshiny, "/public_wage_premium_educ.dta"))
gender_wage_premium     <- read_dta(file.path(datapathshiny, "/gender_wage_premium.dta"))
gender_wage_premium_last     <- read_dta(file.path(datapathshiny, "/gender_wage_premium_last.dta"))
public_sector_emp_temp     <- read_dta(file.path(datapathshiny, "/public_sector_emp_temp.dta"))
public_sector_emp_temp_last     <- read_dta(file.path(datapathshiny, "/public_sector_emp_temp_last.dta"))
gender_leadership     <- read_dta(file.path(datapathshiny, "gender_leadership.dta"))
gender_wage_premiumpublic     <- read_dta(file.path(datapathshiny, "gender_wage_premiumpublic.dta"))
rsconnect::deployApp(appDir = "C:/WBG/GitHub/WWBI/ShinyApp",
appPrimaryDoc = "02-shiny-dashboard.R")
rsconnect::showLogs()
grep("C:/WBG/GitHub/WWBI/Data/data_wwbi.dta", readLines("app.R"), value = TRUE)
grep("C:/WBG/GitHub/WWBI/Data/data_wwbi.dta", readLines("02-shiny-dashboard.R"), value = TRUE)
getwd()  # Shows the current working directory
rsconnect::deployApp(appDir = "C:/WBG/GitHub/WWBI/ShinyApp",
appPrimaryDoc = "02-shiny-dashboard.R")
rsconnect::showLogs()
files <- list.files(pattern = "\\.R$", full.names = TRUE)
for (file in files) {
lines <- grep("C:/WBG/GitHub/WWBI/Data/data_wwbi.dta", readLines(file), value = TRUE)
if (length(lines) > 0) {
print(paste("Found in:", file))
print(lines)
}
}
rm(list = ls())  # Clears all variables
gc()  # Frees memory
library(haven)
library(dplyr)
library(tidyr)
library(stringr)
library(labelled)
library(data.table)
library(ggplot2)
library(shinydashboard)
library(shiny)
library(shinythemes)
library(DT)
library(maps)
library(mapdata)
library(leaflet)
library(rnaturalearth)
library(sf)
library(plotly)
library(officer)
library(flextable)
library(viridis)
library(here)
library(glue)
library(colourpicker)
library(wbstats)
library(htmlwidgets)
library(bs4Dash)
library(countrycode)
library(bslib)
datapathshiny <- "C:/WBG/GitHub/WWBI/ShinyApp"
data_wwbi     <- read_dta(file.path(datapathshiny, "/data_wwbi.dta"))
data_gdp     <- read_dta(file.path(datapathshiny, "/data_gdp.dta"))
gdp_2015     <- read_dta(file.path(datapathshiny, "/gdp_2015.dta"))
world_spdf <- st_read(file.path(datapathshiny, "/world_spatial.gpkg"))
selected_data_long     <- read_dta(file.path(datapathshiny, "/selected_data_long.dta"))
data_wwbi_long     <- read_dta(file.path(datapathshiny, "/data_wwbi_long.dta"))
wage_bill_publicexp     <- read_dta(file.path(datapathshiny, "/wage_bill_publicexp.dta"))
wage_bill_gdp     <- read_dta(file.path(datapathshiny, "/wage_bill_gdp.dta"))
public_sector_emp_temp     <- read_dta(file.path(datapathshiny, "/public_sector_emp_temp.dta"))
public_sector_emp     <- read_dta(file.path(datapathshiny, "/public_sector_emp.dta"))
public_sector_emp_temp_last     <- read_dta(file.path(datapathshiny, "/public_sector_emp_temp_last.dta"))
public_sector_workforce.dta     <- read_dta(file.path(datapathshiny, "/public_sector_workforce.dta"))
public_sector_workforce_first_last     <- read_dta(file.path(datapathshiny, "/public_sector_workforce_first_last.dta"))
gender_workforce     <- read_dta(file.path(datapathshiny, "/gender_workforce.dta"))
data_indicator_wb     <- read_dta(file.path(datapathshiny, "/data_indicator_wb.dta"))
merged_data     <- read_dta(file.path(datapathshiny, "/merged_data.dta"))
tertiary_education     <- read_dta(file.path(datapathshiny, "/tertiary_education.dta"))
public_wage_premium     <- read_dta(file.path(datapathshiny, "/public_wage_premium.dta"))
public_wage_premium_educ     <- read_dta(file.path(datapathshiny, "/public_wage_premium_educ.dta"))
gender_wage_premium     <- read_dta(file.path(datapathshiny, "/gender_wage_premium.dta"))
gender_wage_premium_last     <- read_dta(file.path(datapathshiny, "/gender_wage_premium_last.dta"))
public_sector_emp_temp     <- read_dta(file.path(datapathshiny, "/public_sector_emp_temp.dta"))
public_sector_emp_temp_last     <- read_dta(file.path(datapathshiny, "/public_sector_emp_temp_last.dta"))
gender_leadership     <- read_dta(file.path(datapathshiny, "gender_leadership.dta"))
gender_wage_premiumpublic     <- read_dta(file.path(datapathshiny, "gender_wage_premiumpublic.dta"))
rsconnect::deployApp(appDir = "C:/WBG/GitHub/WWBI/ShinyApp",
appPrimaryDoc = "02-shiny-dashboard.R")
rsconnect::showLogs()
rsconnect::deployApp(appDir = "C:/WBG/GitHub/WWBI/ShinyApp",
appPrimaryDoc = "02-shiny-dashboard.R")
rsconnect::showLogs()
gc()
grep("data_wwbi", list.files(pattern = "\\.R$", recursive = TRUE), value = TRUE)
file.exists("global.R")
grep("source", list.files(pattern = "\\.R$", recursive = TRUE), value = TRUE)
rsconnect::deployApp(appDir = "C:/WBG/GitHub/WWBI/ShinyApp",
appPrimaryDoc = "02-shiny-dashboard.R")
rsconnect::showLogs()
